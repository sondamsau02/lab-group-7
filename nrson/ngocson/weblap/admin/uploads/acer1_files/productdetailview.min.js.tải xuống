try{var Platform=function(){return"undefined"!=typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?"Mobile":"Desktop"};const a=()=>{const a=new WeakSet;return(b,c)=>{if("object"==typeof c&&null!==c){if(a.has(c))return;a.add(c)}return c}};var color=0<document.getElementsByClassName("js--select-color-item").length?document.activeElement.querySelector(".js--select-color-item.active > p").innerText:"default",name=productObj.name,brand=document.querySelectorAll("ol > li")[2].innerText,cate=document.querySelectorAll("ol > li")[1].innerText,param=document.referrer.split("/"),productId=productObj.id;try{var price=document.querySelector(".st-price-main").innerText.replace(/(\.|₫|đ)/g,"").trim()}catch{}if(null==price&&(price=document.activeElement.querySelector(".price-select-item > p").innerText.replace(/(\.|₫|đ)/g,"").trim()),""==param[3]||"dien-thoai"==param[3]||"may-tinh-xach-tay"==param[3]||"may-tinh-bang"==param[3]||"apple"==param[3]||"xiaomi"==param[3]||"tim-kiem"==param[3]?(dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(price),brand:brand,category:cate,variant:color}]}},event:"productdetailviewafterclick",Platform:Platform()}),$(".st-select-color__item").on("click",function(){dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:0<document.getElementsByClassName("price-select-item").length?document.activeElement.querySelector(".price-select-item > p").innerText.replace(/(\.|₫|đ)/g,"").trim():parseInt(price),brand:brand,category:cate,variant:this.querySelector("p").innerText}]}},event:"productdetailviewafterclick",Platform:Platform()})}),$(".price-select-item").on("click",function(){dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(this.querySelector("p").innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:brand,category:cate,variant:document.querySelector(".js--select-color-item.active > p").innerText}]}},event:"productdetailviewafterclick",Platform:Platform()})})):(dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(price),brand:brand,category:cate,variant:color}]}},event:"productdetailview",Platform:Platform()}),$(".choose-color").on("click",function(){dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(price),brand:brand,variant:$(".choose-color.active").attr("title").replace(/\./g,"")}]}},event:"productdetailview",Platform:Platform()})}),$(".st-select-color__item").on("click",function(){dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(document.activeElement.querySelector(".price-select-item > p").innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:brand,category:cate,variant:this.querySelector("p").innerText}]}},event:"productdetailviewafterclick",Platform:Platform()})}),$(".price-select-item").on("click",function(){dataLayer.push({ecommerce:{detail:{products:[{name:name,id:productId,price:parseInt(this.querySelector("p").innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:brand,category:cate,variant:document.activeElement.querySelector(".js--select-color-item.active > p").innerText}]}},event:"productdetailviewafterclick",Platform:Platform()})})),setTimeout(()=>{$(".fs-bbotb1").attr("onclick","ga('send', 'event', 'Product Detail', 'Click CTA Button', 'Mua tra\u0309 th\u1EB3ng - Below Description');"),$(".fs-bbotb2").attr("onclick","ga('send', 'event', 'Product Detail', 'Click CTA Button', 'Mua tra\u0309 g\xF3p 0% - Below Description');")},2e3),1==flag_ants){var colors=document.querySelectorAll(".choose-color"),stringColor="",skuTitle=$(".nosku").text();skuTitle.split(".")[1].substring(0,skuTitle.split(".")[1].length-1);var sku=null==document.querySelector(".choose-color.active")?skuTitle:document.querySelector(".choose-color.active").dataset.sku;for(let a=0;a<colors.length;a++)stringColor+=colors[a].title+",";var orther="",priceNKD=$(".fs-dtprice").text().replace(/\./g,"").replace(/₫/g,"").replace(/ /g,"");admp_event.track("product","view",{name:"View Product",items:[{id:productId,name:name,price:null==price?priceNKD:parseInt(price.replace(/\./g,"")),currency:"VND",brand:brand,description:document.querySelector("meta[property='og:description']").getAttribute("content"),image_url:document.querySelector("meta[property='og:image']").getAttribute("content"),url:window.location.href,variant:stringColor=stringColor.slice(0,-1),sku:sku}]});try{document.querySelector(".fs-dti-oder.dts-addtocart").addEventListener("click",function(){admp_event.track("product","add_to_cart",{name:"Add To Cart",items:[{id:productId,name:name,quantity:1,sku:sku}],revenue:parseInt(price.replace(/\./g,"")),currency:"VND",num_items:1})}),document.querySelector(".fs-dti-tgop.btn-ntc-ttd").addEventListener("click",function(){admp_event.track("product","add_to_cart",{name:"Add To Cart Tr\u1EA3 G\xF3p",items:[{id:productId,name:name,quantity:1,sku:sku}],revenue:parseInt(price.replace(/\./g,"")),currency:"VND",num_items:1})}),document.querySelectorAll(".fs-dti-tgop")[1].addEventListener("click",function(){admp_event.track("product","add_to_cart",{name:"Add To Cart Tr\u1EA3 G\xF3p",items:[{id:productId,name:name,quantity:1,sku:sku}],revenue:parseInt(price.replace(/\./g,"")),currency:"VND",num_items:1})})}catch{}}$(document).on("click","#btn-buy-now",function(){setTimeout(function(){var a=$(".c-cart__product").map(function(){return{name:$(this).find(".product-cart__name")[0].innerText,id:$(this).data("variant"),price:parseInt($(this).find(".cs-price--main")[0].innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:$(this).data("brand"),variant:$(this).find(".c-dropdown-button")[0].innerText,quantity:parseInt($(this).find(".cs-input-cart").val())}}).get();try{dataLayer.push({event:"checkoutCart",Purchasetype:"Tra\u0309 th\u0103\u0309ng",Platform:Platform(),ecommerce:{checkout:{actionField:{step:"Cart-Th\xF4ng tin kha\u0301ch ha\u0300ng"},products:a}}}),null!=sessionStorage.getItem("checkoutCart")&&sessionStorage.removeItem("checkoutCart");var b=JSON.stringify(dataLayer.filter(a=>"checkoutCart"==a.event));sessionStorage.setItem("checkoutCart",b)}catch(b){console.log(a)}},5e3)}),$(document).on("click","#btnCompleteOrder",function(){var b=$("input[type='radio'][name='deli']:checked").next().html(),c=$(".modal--is-visible .c-cart__product").map(function(){return{name:$(this).find(".product-cart__name")[0].innerText,id:$(this).data("variant"),price:parseInt($(this).find(".cs-price--main")[0].innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:$(this).data("brand"),variant:$(this).find(".c-dropdown-button")[0].innerText,quantity:parseInt($(this).find(".cs-input-cart").val())}}).get();try{dataLayer.push({event:"checkoutShippinginformation",Purchasetype:"Tra\u0309 th\u0103\u0309ng",Platform:Platform(),ecommerce:{checkout:{actionField:{step:"Ph\u01B0\u01A1ng th\u01B0\u0301c nh\xE2\u0323n ha\u0300ng",option:b},products:c}}}),null!=sessionStorage.getItem("checkoutShippinginformation")&&sessionStorage.removeItem("checkoutShippinginformation");var d=JSON.stringify(dataLayer.filter(a=>"checkoutShippinginformation"==a.event),a());sessionStorage.setItem("checkoutShippinginformation",d)}catch(a){console.log(a)}}),$(document).on("click","#btnCompleteOrder",function(){var b=document.querySelector("input[name=\"cart2\"]:checked").nextSibling.innerText,c=$(".c-cart__product").map(function(){return{name:$(this).find(".product-cart__name")[0].innerText,id:$(this).data("variant"),price:parseInt($(this).find(".cs-price--main")[0].innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:$(this).data("brand"),variant:$(this).find(".c-dropdown-button")[0].innerText,quantity:parseInt($(this).find(".cs-input-cart").val())}}).get();try{dataLayer.push({event:"checkoutPaymentinformation",Purchasetype:"Tra\u0309 th\u0103\u0309ng",Platform:Platform(),ecommerce:{checkout:{actionField:{step:"Ph\u01B0\u01A1ng th\u01B0\u0301c nh\xE2\u0323n ha\u0300ng",option:b},products:c}}}),null!=sessionStorage.getItem("checkoutPaymentinformation")&&sessionStorage.removeItem("checkoutPaymentinformation");var d=JSON.stringify(dataLayer.filter(a=>"checkoutPaymentinformation"==a.event),a());sessionStorage.setItem("checkoutPaymentinformation",d)}catch(a){console.log(a)}}),$(document).on("click","#btnInstallment",function(){var b=document.querySelector("input[name=\"cart2\"]:checked").nextSibling.innerText,c=$(".c-cart__product").map(function(){return{name:$(this).find(".product-cart__name")[0].innerText,id:$(this).data("variant"),price:parseInt($(this).find(".cs-price--main")[0].innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:$(this).data("brand"),variant:$(this).find(".c-dropdown-button")[0].innerText,quantity:parseInt($(this).find(".cs-input-cart").val())}}).get();try{dataLayer.push({event:"checkoutPaymentinformation",Purchasetype:"Tra\u0309 th\u0103\u0309ng",Platform:Platform(),ecommerce:{checkout:{actionField:{step:"Ph\u01B0\u01A1ng th\u01B0\u0301c nh\xE2\u0323n ha\u0300ng",option:b},products:c}}}),null!=sessionStorage.getItem("checkoutPaymentinformation")&&sessionStorage.removeItem("checkoutPaymentinformation");var d=JSON.stringify(dataLayer.filter(a=>"checkoutPaymentinformation"==a.event),a());sessionStorage.setItem("checkoutPaymentinformation",d)}catch(a){console.log(a)}}),$(document).on("click","#btnCompleteOrder",function(){console.log("Purchase"),setTimeout(function(){var b=document.querySelector("input[name=\"cart2\"]:checked").nextSibling.innerText,c=$("#js--popup-ordersuccess .c-cart__product").map(function(){return{name:$(this).find(".product-cart__name")[0].innerText,id:$(this).data("variant"),price:parseInt($(this).find(".cs-price--main")[0].innerText.replace(/(\.|₫|đ)/g,"").trim()),brand:$(this).data("brand"),quantity:$(this).find(".product-cart__quality")[0].innerText,coupon:$(".i-txt-voucher").val()}}).get(),d=$("#js--popup-ordersuccess .st-table-title").map(function(){var a=0;return $("#js--popup-ordersuccess .c-cart__title--modified").next().find(".cs-price--main").map((b,c)=>{a+=parseInt(c.text().replace(/(\.|₫|đ)/g,"").trim())}),{id:$("#js--popup-ordersuccess .c-cart__data-user .st-table tr:nth-child(1) td:nth-child(2) .text-size--lg").text(),affiliation:"Online Store",revenue:a}}).get();try{dataLayer.push({event:"Purchase",Purchasetype:"Tra\u0309 th\u0103\u0309ng",Platform:Platform(),ecommerce:{purchase:{actionField:d,products:c}}}),null!=sessionStorage.getItem("Purchase")&&sessionStorage.removeItem("Purchase");var e=JSON.stringify(dataLayer.filter(a=>"Purchase"==a.event),a());sessionStorage.setItem("Purchase",e)}catch(a){console.log(a)}},5e3)})}catch(a){console.log(a)}